<!DOCTYPE html>

<html style="font-size: 16px;" lang="pt"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">

    <title>Cadastro carteirinha</title>
    <link rel="website icon" type="png" href="images/logo_icon_noBg.png">

    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="index.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 5.12.7, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Página Inicial">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>

  <body class="u-body u-xl-mode" data-lang="pt">
    <section class="u-align-center u-clearfix u-section-1" id="carousel_2955">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-expanded-width u-gutter-0 u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-row">
              <div class="u-align-center u-container-style u-image u-layout-cell u-size-30 u-image-1" data-image-width="630" data-image-height="1280">
                <div class="u-container-layout u-container-layout-1"></div>
              </div>
              <div class="u-align-center u-container-style u-grey-5 u-layout-cell u-size-30 u-layout-cell-2">
                <div class="u-container-layout u-valign-middle-xl u-container-layout-2">
                  <p></p>
                  <h3 class="u-align-center-lg u-align-center-md u-align-center-sm u-align-center-xs u-custom-font u-font-montserrat u-text u-text-default u-text-1">Cadastro cartão de acesso</h3>
                  <h3 class="u-align-center-lg u-align-center-md u-align-center-sm u-align-center-xs u-custom-font u-font-montserrat u-text u-text-default u-text-1">(provisório)</h3>
                  <div class="u-form u-login-control u-white u-form-1">
                    
                    <form action="buscar_aluno_carteirinha_provisoria.php" method="POST">
                      <p></p>
                      <div class="u-form-group u-form-name">
                        <label for="matricula" class="u-label">Matrícula*</label>
                        <input type="text" placeholder="Preencha a matrícula" id="matricula" name="matricula" class="u-grey-5 u-input u-input-rectangle u-input-1" required><br>
                      </div>

                      <div class="u-align-left u-form-group u-form-submit">
                        <a href="?" class="u-border-none u-btn u-btn-submit u-button-style u-palette-2-base u-btn-1">Buscar Aluno</a>
                        <input type="submit" value="submit" class="u-form-control-hidden">
                      </div>
                      <p></p>
                      <p></p>
                    </form>
                    




                    <div id="aluno-info" style="display: none;">
                      <p></p>
                      <h4 class="u-align-center-lg u-align-center-md u-align-center-sm u-align-center-xs u-custom-font u-font-montserrat u-text u-text-default u-text-1" style="color: red;">Informações do Aluno</h4>
                    

                      <p><strong>Nome do Aluno:</strong> <span id="aluno-nome" class="u-grey-5 u-input u-input-rectangle u-input-1" style="display: inline-block;"></span></p>
                      <p><strong>Turma do Aluno:</strong> <span id="aluno-turma" class="u-grey-5 u-input u-input-rectangle u-input-1" style="display: inline-block;"></span></p>


                      <form action="cadastro_tag_provisoria.php" method="POST">
                          <input type="hidden" name="matricula" id="aluno-matricula">

                          <div class="u-form-group u-form-name">
                            <label for="rfid_codigo" class="u-label">Código da Tag RFID*</label>
                            <input type="text" placeholder="Preencha o código da tag RFID" id="rfid_codigo" name="rfid_codigo" class="u-grey-5 u-input u-input-rectangle u-input-1" required><br>
                          </div>

                          <div class="u-form-group">
                            <label for="validade" class="u-label">Validade da Tag RFID*</label>
                            <select id="validade" name="validade" class="u-grey-5 u-input u-input-rectangle u-input-1" required>
                              <option value="" disabled selected>Selecione</option>
                              <option value="1">1 dia</option>
                              <option value="7">7 dias</option>
                              <option value="14">14 dias</option>
                              <option value="30">30 dias</option>
                            </select>
                          </div>

                          <p></p>
                          <p></p>

                          <div class="u-align-left u-form-group u-form-submit">
                            <a href="?" class="u-border-none u-btn u-btn-submit u-button-style u-palette-2-base u-btn-1">Cadastrar Tag RFID</a>
                            <input type="submit" value="submit" class="u-form-control-hidden">
                          </div>

                          <p></p>
                          <p></p>
                      </form>
                  </div>
                </div>
                  <img class="u-align-center-lg u-align-center-md u-align-center-sm u-align-center-xs u-image u-image-contain u-image-default u-image-2" src="images/logo_tech_class_2023.png" alt="" data-image-width="961" data-image-height="259">
                
                
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  
  <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-11a1"><div class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-sheet-1">
    <p class="u-align-center u-small-text u-text u-text-variant u-text-1"> Este site é propriedade exclusiva dos membros da Tech Class</p>
  </div></footer>

  <script>
    const form = document.querySelector('form');
    const alunoInfo = document.getElementById('aluno-info');
    const alunoNome = document.getElementById('aluno-nome');
    const alunoTurma = document.getElementById('aluno-turma');
    const matriculaInput = document.getElementById('aluno-matricula');
    
    form.addEventListener('submit', async function (event) {
        event.preventDefault();
        const matricula = form.matricula.value;

        // Fetch para buscar informações do aluno
        const response = await fetch('buscar_aluno_carteirinha_provisoria.php', {
            method: 'POST',
            body: new URLSearchParams({ matricula }),
        });

        if (response.ok) {
            const aluno = await response.json();
            if (aluno) {
                alunoNome.textContent = aluno.nome;
                alunoTurma.textContent = aluno.turma;
                matriculaInput.value = matricula;
                alunoInfo.style.display = 'block';
            } else {
                alunoInfo.style.display = 'none';
                alert('Nenhum aluno encontrado com essa matrícula.');
            }
        }
    });


    inserirTagForm.addEventListener('submit', async function (event) {
            event.preventDefault();
            const rfidCodigo = inserirTagForm.rfid_codigo.value;
            const validade = inserirTagForm.validade.value;
            const matricula = matriculaInput.value;

            const response = await fetch('inserir_tag.php', {
                method: 'POST',
                body: new URLSearchParams({ matricula, rfid_codigo: rfidCodigo, validade }),
            });

            if (response.ok) {
                alert('Tag RFID cadastrada com sucesso!');
                inserirTagForm.reset();
            } else {
                alert('Erro ao cadastrar a tag RFID. Tente novamente.');
            }
        });




    
</script>
</body></html>